
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jeu Nombres ThaÃ¯</title>
  <link rel="manifest" href="manifest.json" />
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>
</head>
<body>
  <h1>Bienvenue sur lâ€™application ğŸ‡¹ğŸ‡­</h1>
  <button onclick="startGame()">Commencer</button>

  <div id="game" style="display:none;">
    <p id="niveau"></p>
    <audio id="audio"></audio>
    <button onclick="playAudio()">ğŸ”Š Rejouer</button>
    <div id="choices"></div>
    <div id="feedback"></div>
  </div>

  <script>
    const thaiMap = {0:"à¸¨à¸¹à¸™à¸¢à¹Œ",1:"à¸«à¸™à¸¶à¹ˆà¸‡",2:"à¸ªà¸­à¸‡",3:"à¸ªà¸²à¸¡",4:"à¸ªà¸µà¹ˆ",5:"à¸«à¹‰à¸²",6:"à¸«à¸",7:"à¹€à¸ˆà¹‡à¸”",8:"à¹à¸›à¸”",9:"à¹€à¸à¹‰à¸²",10:"à¸ªà¸´à¸š",20:"à¸¢à¸µà¹ˆà¸ªà¸´à¸š",30:"à¸ªà¸²à¸¡à¸ªà¸´à¸š",40:"à¸ªà¸µà¹ˆà¸ªà¸´à¸š",50:"à¸«à¹‰à¸²à¸ªà¸´à¸š",60:"à¸«à¸à¸ªà¸´à¸š",70:"à¹€à¸ˆà¹‡à¸”à¸ªà¸´à¸š",80:"à¹à¸›à¸”à¸ªà¸´à¸š",100:"à¸«à¸™à¸¶à¹ˆà¸‡à¸£à¹‰à¸­à¸¢",105:"à¸«à¸™à¸¶à¹ˆà¸‡à¸£à¹‰à¸­à¸¢à¸«à¹‰à¸²",200:"à¸ªà¸­à¸‡à¸£à¹‰à¸­à¸¢",300:"à¸ªà¸²à¸¡à¸£à¹‰à¸­à¸¢",400:"à¸ªà¸µà¹ˆà¸£à¹‰à¸­à¸¢",1000:"à¸«à¸™à¸¶à¹ˆà¸‡à¸à¸±à¸™",1500:"à¸à¸±à¸™à¸«à¹‰à¸²",2000:"à¸ªà¸­à¸‡à¸à¸±à¸™",10000:"à¸«à¸™à¸¶à¹ˆà¸‡à¸«à¸¡à¸·à¹ˆà¸™"};
    const available = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,40,50,60,70,80,100,105,200,300,400,1000,1500,2000,10000];
    let currentAnswer = null;
    let currentMaxIndex = 3;
    let currentRange = available.slice(0, currentMaxIndex + 1);
    let answered = new Set();
    let successStreak = 0;
    let attemptCount = 0;

    function startGame() {
      document.querySelector('button').style.display = 'none';
      document.getElementById('game').style.display = 'block';
      nextQuestion();
    }

    function playAudio() {
      const audio = document.getElementById("audio");
      audio.currentTime = 0;
      audio.play();
    }

    function updateUI() {
      document.getElementById("niveau").innerText = "Niveau : 0 Ã  " + available[currentMaxIndex];
    }

    function nextQuestion() {
      if (answered.size >= currentRange.length) {
        successStreak++;
        answered.clear();
        attemptCount = 0;
        if (successStreak >= 3 && currentMaxIndex + 1 < available.length) {
          currentMaxIndex++;
          currentRange = available.slice(0, currentMaxIndex + 1);
          successStreak = 0;
        }
      }
      updateUI();
      const rand = Math.floor(Math.random() * currentRange.length);
      currentAnswer = currentRange[rand];
      const audio = document.getElementById("audio");
      audio.src = "audio/" + currentAnswer + ".mp3";
      audio.play();
      const options = new Set([currentAnswer]);
      while (options.size < 3) {
        const r = currentRange[Math.floor(Math.random() * currentRange.length)];
        options.add(r);
      }
      const choices = Array.from(options).sort(() => Math.random() - 0.5);
      const choiceDiv = document.getElementById("choices");
      choiceDiv.innerHTML = "";
      choices.forEach(n => {
        const btn = document.createElement("button");
        btn.textContent = `${n} = ${thaiMap[n] || ''}`;
        btn.onclick = () => checkAnswer(n);
        choiceDiv.appendChild(btn);
      });
    }

    function checkAnswer(choice) {
      const feedback = document.getElementById("feedback");
      attemptCount++;
      if (choice === currentAnswer) {
        feedback.textContent = "âœ… Bonne rÃ©ponse !";
        answered.add(choice);
        setTimeout(nextQuestion, 800);
      } else {
        feedback.textContent = "âŒ Mauvaise rÃ©ponse.";
        successStreak = 0;
        playAudio();
      }
    }
  </script>
</body>
</html>
